(this["webpackJsonplab.stranger_things"]=this["webpackJsonplab.stranger_things"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(20),c=n.n(r),a=n(10),i=n(5),o=n(3),u=n(2),l=n(6),j="https://strangers-things.herokuapp.com/api/2204-FTB-MT-WEB-PT",b=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n,s,r,c,a,i=arguments;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",s=i.length>2?i[2]:void 0,r=i.length>3?i[3]:void 0,c=!1,e.prev=4,e.next=7,fetch(j+t,p(d(n,r),s));case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(c=e.sent).error){e.next=13;break}throw c.error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e,t){return{method:e.toUpperCase(),headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},p=function(e,t){return t&&(e.headers=Object.assign(e.headers,{Authorization:"Bearer ".concat(t)})),e},h=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n){var s,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/users/login","POST",null,{user:{username:t,password:n}});case 2:return s=e.sent,e.next=5,b("/users/me","GET",s.data.token);case 5:return r=e.sent,console.log("im the user",r),e.abrupt("return",{user:r.data,token:s.data.token});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n){var s,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/users/register","POST",null,{user:{username:t,password:n}});case 2:return s=e.sent,e.next=5,b("/users/me",null,s.data.token);case 5:return r=e.sent,console.log("new one this time",r),e.abrupt("return",{user:s.data.user,token:s.data.token});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/users/me","GET",t);case 2:return n=e.sent,console.log("am i getting this?",n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n,s){var r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts/".concat(n,"/messages"),"POST",t,{message:{content:s}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),f=n(0),v=function(e){var t=e.user,n=e.setUser,r=e.token,c=e.setToken,a=e.UserData,o=e.setUserData,j=Object(s.useState)(""),b=Object(i.a)(j,2),d=b[0],p=b[1],m=Object(s.useState)(""),v=Object(i.a)(m,2),g=v[0],k=v[1],w=Object(s.useState)(!1),N=Object(i.a)(w,2),y=N[0],S=N[1],P=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var s,r,a,i,l,j,b;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!y){e.next=11;break}return e.next=4,O(d,g);case 4:s=e.sent,r=s.user,a=s.token,n(r),c(a),e.next=23;break;case 11:return e.next=13,h(d,g);case 13:return i=e.sent,l=i.user,j=i.token,n(l),c(j),e.next=20,x(j);case 20:b=e.sent,o(b.data),console.log("hereaskjdfhlaskdf",b);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("fetched user data",a),Object(f.jsx)(f.Fragment,{children:t&&r?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{children:"User Profile"}),Object(f.jsxs)("p",{className:"user-profile-name",children:["Username: ",t.username]}),Object(f.jsx)("button",{className:"button",onClick:function(){n(!1),c("")},children:"Logout"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h1",{children:[y?"Registration":"Login"," "]}),Object(f.jsxs)("form",{onSubmit:P,children:[Object(f.jsx)("input",{className:"input-text",onChange:function(e){return p(e.target.value)},required:!0,name:"username",type:"text",placeholder:"Username",value:d}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){return k(e.target.value)},required:!0,name:"password",type:"text",placeholder:"Password",value:g}),Object(f.jsx)("button",{className:"button",type:"submit",children:"Submit"})]}),Object(f.jsx)("button",{className:"button",onClick:function(){S(!y)},children:"Register/Login"})]})})},g=function(e){var t=e.posts,n=e.setPosts,r=e.user,c=e.token,a=(e.featuredPost,e.setFeaturedPost),j=Object(s.useState)(""),d=Object(i.a)(j,2),p=d[0],h=d[1],O=Object(s.useState)(""),x=Object(i.a)(O,2),m=x[0],v=x[1],g=Object(s.useState)(""),k=Object(i.a)(g,2),w=k[0],N=k[1],y=Object(s.useState)(""),S=Object(i.a)(y,2),P=S[0],C=S[1],D=Object(s.useState)(""),T=Object(i.a)(D,2),L=T[0],U=T[1],I=Object(s.useState)("false"),_=Object(i.a)(I,2),F=_[0],M=_[1],E=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts","GET",c);case 2:t=e.sent,n(t.data.posts),console.log(t.data.posts);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n,s,r,c,a){var i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts","POST",t,{post:{title:n,description:s,price:r,location:c,willDeliver:a}});case 2:return e.sent,e.next=5,E(t);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,s,r,c,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts/".concat(t),"DELETE",c);case 2:return e.sent,e.next=5,E;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=Object(o.e)();Object(s.useEffect)((function(){E()}),[]);var B=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),window.confirm("Delete Post?")&&A(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R(c,m,w,P,L,F);case 3:e.sent,E();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{className:"posts-title",children:"Items for Sale"}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){h(e.target.value)},type:"text",name:"search",placeholder:"Search Listings"}),Object(f.jsx)("ul",{className:"post-body",children:t.filter((function(e){return function(e,t){return"".concat(t.title," ").concat(t.author.username," ").concat(t.description).toLowerCase().includes(e.toLowerCase())}(p,e)})).map((function(e){return Object(f.jsxs)("li",{className:"item-body",onClick:function(t){!function(e,t){r&&c?(a(t),q.push("/posts/".concat(t._id))):alert("Please Log In to View this Post")}(0,e)},children:[Object(f.jsxs)("div",{children:["Item for Sale: ",e.title]}),e.location&&Object(f.jsxs)("div",{children:["Location: ",e.location," "]}),Object(f.jsxs)("div",{children:["Description: ",e.description]}),Object(f.jsxs)("div",{children:["Price: ",e.price]}),Object(f.jsx)("ul",{children:r&&e.isAuthor&&e.messages.map((function(e){return Object(f.jsx)("li",{children:e.content},e._id)}))}),Object(f.jsxs)("div",{children:["Will Deliver: ",e.willDeliver?"Yes":"No"," "]}),Object(f.jsxs)("div",{children:["Posted By: ",e.author.username]}),r&&e.isAuthor&&Object(f.jsx)("button",{className:"button",onClick:function(t){return B(t,e._id)},children:"Delete"})]},e._id)}))}),r&&c&&Object(f.jsxs)("form",{className:"item-submit",onSubmit:W,children:[Object(f.jsx)("div",{children:"Item Name"}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){return v(e.target.value)},type:"text",name:"itemName",placeholder:"Required",value:m}),Object(f.jsx)("div",{children:"Description"}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){return N(e.target.value)},type:"text",name:"itemDescription",placeholder:"Required",value:w}),Object(f.jsx)("div",{children:"Price"}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){return C(e.target.value)},type:"text",name:"itemPrice",placeholder:"Item Required",value:P}),Object(f.jsx)("div",{children:"Location"}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){return U(e.target.value)},type:"text",name:"itemLocation",placeholder:"Required",value:L}),Object(f.jsx)("div",{children:"Will Deliver Item"}),!F&&Object(f.jsx)("p",{children:"Yes"}),Object(f.jsx)("input",{className:"input-text",onChange:function(e){return M(!F)},type:"checkbox",name:"itemDeliver"}),Object(f.jsx)("button",{className:"button",type:"submit",children:"Submit Post"})]})]})},k=n(22),w=function(e){var t=e.user,n=e.token,s=e.featuredPost,r=e.setFeaturedPost,c=e.message,a=e.setMessage,i=Object(o.e)(),j=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var i,o,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(n,s._id,c);case 3:i=e.sent,o=[i].concat(Object(k.a)(s.messages)),l=Object.assign(s,{messages:o}),r(l),a("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.f)().postId;return s?Object(f.jsxs)("div",{className:"featured-post",children:[Object(f.jsx)("h1",{children:s.title}),s.location&&Object(f.jsxs)("div",{children:["Location: ",s.location," "]}),Object(f.jsxs)("div",{children:["Description: ",s.description]}),Object(f.jsxs)("div",{children:["Price: ",s.price]}),Object(f.jsx)("ul",{children:t&&s.isAuthor&&s.messages.map((function(e){return Object(f.jsx)("li",{children:e.content},e._id)}))}),Object(f.jsxs)("div",{children:["Will Deliver: ",s.willDeliver?"Yes":"No"," "]}),Object(f.jsxs)("div",{children:["Posted By: ",s.author.username]}),t&&n&&!s.isAuthor&&Object(f.jsxs)("form",{className:"MessageSection",onSubmit:j,children:[Object(f.jsx)("input",{className:"input-text",onChange:function(e){return a(e.target.value)},type:"text",name:"Message",placeholder:"Write a Message",value:c}),Object(f.jsx)("button",{className:"button",type:"submit",children:"Submit Message"})]}),Object(f.jsx)("button",{onClick:function(e){r(!1),i.push("/posts")},children:"Close"})]}):Object(f.jsx)("div",{children:"Click a Post to View"})},N=function(e){var t,n,s=e.UserData,r=e.user,c=e.token;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{id:"pageTitle",children:"Stranger's Things"}),Object(f.jsx)("div",{id:"pageIntro",children:"Welcome to Stranger's Things. If this is your first time, please Register by clicking the Account tab. If you're a returning member, please Log In to Continue!"}),Object(f.jsx)("div",{children:r&&c&&Object(f.jsx)("h2",{className:"sent-received-messages",children:"Sent Messages"})}),null===(t=s.messages)||void 0===t?void 0:t.map((function(e,t){if(e.fromUser._id===s._id)return Object(f.jsxs)("div",{className:"sent-messages",children:[Object(f.jsxs)("div",{children:["From Post: ",e.post.title]}),Object(f.jsx)("div",{children:e.content})]},"".concat(e._id," ").concat(t))})),Object(f.jsx)("div",{children:r&&c&&Object(f.jsx)("h2",{className:"sent-received-messages",children:"Received Messages"})}),null===(n=s.messages)||void 0===n?void 0:n.map((function(e,t){if(e.fromUser._id!==s._id)return Object(f.jsxs)("div",{className:"received-messages",children:[Object(f.jsxs)("div",{children:["From: ",e.fromUser.username]}),Object(f.jsxs)("div",{children:["Regarding: ",e.post.title]}),Object(f.jsx)("div",{children:e.content})]},t)}))]})},y=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(""),u=Object(i.a)(c,2),l=u[0],j=u[1],b=Object(s.useState)(!1),d=Object(i.a)(b,2),p=d[0],h=d[1],O=Object(s.useState)(!1),x=Object(i.a)(O,2),m=x[0],k=x[1],y=Object(s.useState)("false"),S=Object(i.a)(y,2),P=S[0],C=S[1],D=Object(s.useState)(""),T=Object(i.a)(D,2),L=T[0],U=T[1],I=Object(s.useState)(""),_=Object(i.a)(I,2),F=_[0],M=_[1];return Object(f.jsxs)("main",{children:[Object(f.jsxs)("nav",{children:[Object(f.jsx)(a.b,{exact:!0,to:"/",className:"navLink",activeClassName:"active",children:"Home"}),Object(f.jsx)(a.b,{exact:!0,to:"/posts",className:"navLink",activeClassName:"active",children:"Posts"}),Object(f.jsx)(a.b,{exact:!0,to:"/login",className:"navLink",activeClassName:"active",children:"Account"})]}),Object(f.jsx)(o.a,{exact:!0,path:"/",children:Object(f.jsx)(N,{UserData:p,user:m,token:l})}),Object(f.jsxs)(o.a,{path:"/posts",children:[Object(f.jsx)(o.a,{path:"/posts/:postId",children:l&&Object(f.jsx)(w,{user:m,token:l,featuredPost:P,setFeaturedPost:C,message:L,setMessage:U,newMessage:F,setNewMessage:M})}),Object(f.jsx)(g,{user:m,token:l,posts:n,setPosts:r,featuredPost:P,setFeaturedPost:C})]}),Object(f.jsx)(o.a,{path:"/login",children:Object(f.jsx)(v,{user:m,setUser:k,token:l,setToken:j,UserData:p,setUserData:h})})]})};n(33);c.a.render(Object(f.jsx)(a.a,{children:Object(f.jsx)(y,{})}),document.getElementById("app"))}},[[34,1,2]]]);
//# sourceMappingURL=main.e8f9a086.chunk.js.map